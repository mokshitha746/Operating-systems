#include <stdio.h>
#include <stdlib.h>

struct Employee {
    int id;
    char name[30];
    float salary;
};

void writeEmployee(FILE *fp, int index) {
    struct Employee e;
    printf("Enter Employee ID: ");
    scanf("%d", &e.id);
    printf("Enter Name: ");
    scanf("%s", e.name);
    printf("Enter Salary: ");
    scanf("%f", &e.salary);
    fseek(fp, index * sizeof(struct Employee), SEEK_SET);
    fwrite(&e, sizeof(struct Employee), 1, fp);
}

void readEmployee(FILE *fp, int index) {
    struct Employee e;
    fseek(fp, index * sizeof(struct Employee), SEEK_SET);
    fread(&e, sizeof(struct Employee), 1, fp);
    printf("ID: %d, Name: %s, Salary: %.2f\n", e.id, e.name, e.salary);
}

int main() {
    FILE *fp;
    int choice, index;

    fp = fopen("employee.dat", "rb+");
    if (fp == NULL) {
        fp = fopen("employee.dat", "wb+");
    }

    while (1) {
        printf("\n1. Write Employee\n2. Read Employee\n3. Exit\nChoose: ");
        scanf("%d", &choice);
        if (choice == 3) break;

        printf("Enter Record Index (0-based): ");
        scanf("%d", &index);

        if (choice == 1)
            writeEmployee(fp, index);
        else if (choice == 2)
            readEmployee(fp, index);
    }

    fclose(fp);
    return 0;
}
